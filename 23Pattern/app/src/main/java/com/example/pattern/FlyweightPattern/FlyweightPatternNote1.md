# Flyweight
?1 享元模式倡导共用一个，那么如果涉及多线程对数据操作，是否会出问题
？2 提供是否是可用状态？有没有具体的使用场景，或者代码？
？ 单例工厂？但是感觉仍然无法解决多线程对的共享对象的修改问题啊
？ 把可变的定为不可变的？
1 还是不是很透彻
2 感觉Android不太用啊，这种模式。而且我想不出来什么情况下非得这么搞
我现在有些理解了享元模式的含义，但是仍有地方疑惑，就是我认为享元模式是在很特殊的情况下才适合使用。
- 1 非共享元素的 参数， 如果是从别的对象上提取出来的，那么很可能意味着这个对象是在某处创建的， 如果这个对象的创建不是复用的，而是new出来的，就很可能意味着，生内存的目的没有实现彻底。然后从反面想，非共享元素的参数不是从对象中取出来的，而是从屏幕获取的？或者从某个单一的对象里面获取的，那么就意味着，这种很可能是出发了某种操作，临时取得值，而且这种值取值成本特别低。想想这种情况下的适用场景其实并不是特别多的。反导是典型的文件编辑器，用户编辑文字的时候，会马上利用享元模式拿出缓存对象，附上目前用户已经设置好的颜色属性(从单一处取值)， 字体(从单一处取值)， 然后将这个对象设置完全之后立即交给算法部分，以这个对象为参数立即计算出屏幕缓冲需要的数据。我认为也就是类似这种场景需要享元模式而已。 也就是，拿到享元对象之后，会立即用它做指定的计算，传到方法参数里面去，方法执行完就接着执行下一个，周而复始？这样的场景比较合适。其余的还真是想不到啊！
- 2 如果共享元素的单元里面存在对象的引用， 多线程情况下，一旦被某线程将这个引用拿出来做操作，那就很可能引发问题。面对这种情形 ，是如何避免的。 还是享元单元的规定，变量必须是基础类型，这样会比较靠谱？


### 引入
享元模式经典的例子，是文档编辑器的实现。将每一个文字展示在屏幕上，涉及到每一个字符的相关数据存储， 字符展示的位置是一种数据。字符的图像信息是一种数据据。文档上假如有几千万的文字，很显然，我们是不可能存储几千万个相关的数据的！在这里我们首先想到的看看某些数据对象存储空间，能不能共享。
我认为享元模式的核心不止是搞懂"享元"这个含义是如何实现的。还有，享元中的什么内部状态和外部状态。这个是关键。至于什么简单享元，复合享元。我认为前面的搞懂了，其余的是费不了多少脑力就可以了解的。
- 内部状态
- 外部状态
- 共享（存住，如果有就拿出来用，没有就创建一个并存住）