


# char* 与 string

## char* 变为 string


## string 变为char*
```c++
std::string a = "aaaaaaaaaaaa";
char* aChar = a.c_str();
```


# jstring 与 char* 与 string

# JSON
## new json
```c++
Json::Value user_info_params;
  user_info_params["moduleType"] = "rtc";
  user_info_params["userId"] = rtc_user_params_.user_id_;
  user_info_params["appId"] =
      rtc_user_params_.sdk_appid_;  // appid是通过init传递并保存的参数
  user_info_params["sig"] = rtc_user_params_.user_sig_;
  user_info_params["auth"] = rtc_user_params_.user_auth_;
  user_info_params["authType"] = rtc_user_params_.user_auth_type_;
  user_info_params["roomId"] = rtc_user_params_.room_id_;
```

## json toString

```c++
std::string json_param = user_info_params.toStyledString();
```

## string to json

```c++
// change event name to "getServerNodes"
          Json::Value user_data_json;
          Json::CharReaderBuilder builder;
          Json::String err;
          const std::unique_ptr<Json::CharReader> reader(
                  builder.newCharReader());
          if (reader->parse(rtc_mbs_manager_->user_json_parameter,   // 这家伙是 char*
                            (rtc_mbs_manager_->user_json_parameter + strlen(rtc_mbs_manager_->user_json_parameter)),
                            &user_data_json, &err)) {
            user_data_json["eventName"] = "transportLogin";
            Json::Value message;
            rtc_mbs_manager_->interfaceActivityStatsReport (
                    0, true, &message, user_data_json.toStyledString().c_str());
          }
```

## json解析
```c++
Json::Reader reader;
    Json::Value interface_activety;
    std::string trace_id = "";

    if (!reader.parse(json_param, interface_activety)) {  // can't get traceid
      LOGE(kEEReportLogTag,
           "[stats][start] StartRecordNewInterface, user_data parse fail: "
           "user_data:{}",
           json_param);
    } else {
      if (interface_activety["exeTraceId"].isString()) {
        trace_id = interface_activety["exeTraceId"].asString();

        Json::Value activities;
        interface_activities_.Put(trace_id, activities);
        std::string user_data = json_param;
        interface_userdata_.Put(trace_id, user_data);
        LOGI(kEEReportLogTag,
             "[stats][start] StartRecordNewInterface user_data:{}", user_data);
      } else {
        LOGE(kEEReportLogTag,
             "[stats][start] StartRecordNewInterface, exeTraceId error: "
             "user_data:{}",
             json_param);
      }
    }
```